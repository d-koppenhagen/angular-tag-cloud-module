!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("angular-tag-cloud-module",["exports","@angular/core"],e):e(t["angular-tag-cloud-module"]={},t.ng.core)}(this,function(t,o){"use strict";var e=(i.prototype.onResize=function(){var t=this;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(function(){t.realignOnResize&&t.reDraw()},200)},i.prototype.ngOnChanges=function(t){this.reDraw(t)},i.prototype.reDraw=function(t){if(this.dataChanges.emit(t),this.alreadyPlacedWords=[],this.data){this.el.nativeElement.innerHTML="",t&&t.data&&(this.dataArr=t.data.currentValue);var e=this.width;0<this.el.nativeElement.parentNode.offsetWidth&&e<=1&&0<e&&(e=this.el.nativeElement.parentNode.offsetWidth*e),this.options={step:2,aspectRatio:e/this.height,width:e,height:this.height,center:{x:e/2,y:this.height/2},overflow:this.overflow,zoomOnHover:this.zoomOnHover},this.r2.setStyle(this.el.nativeElement,"width",this.options.width+"px"),this.r2.setStyle(this.el.nativeElement,"height",this.options.height+"px"),this.drawWordCloud()}else console.error("angular-tag-cloud: No data passed. Please pass an Array of CloudData")},i.prototype.ngAfterContentInit=function(){this.afterInit.emit()},i.prototype.ngAfterContentChecked=function(){this.afterChecked.emit()},i.prototype.descriptiveEntry=function(t){var e=t.text;return t.color&&(e+="-"+t.color),t.external&&(e+="-"+t.external),t.link&&(e+="-"+t.link),t.rotate&&(e+="-"+t.rotate),e},i.prototype.drawWordCloud=function(){var o=this;this.dataArr.sort(function(t,e){return o.descriptiveEntry(t).localeCompare(o.descriptiveEntry(e))}),this.dataArr.sort(function(t,e){return e.weight-t.weight}),this.dataArr.forEach(function(t,e){o.drawWord(e,t)})},i.prototype.hitTest=function(t,e){var o,i;try{for(var r=function a(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}(e),n=r.next();!n.done;n=r.next()){var s=n.value;if(this.overlapping(t,s))return!0}}catch(l){o={error:l}}finally{try{n&&!n.done&&(i=r["return"])&&i.call(r)}finally{if(o)throw o.error}}return!1},i.prototype.overlapping=function(t,e){return Math.abs(2*t.offsetLeft+t.offsetWidth-2*e.offsetLeft-e.offsetWidth)<t.offsetWidth+e.offsetWidth&&Math.abs(2*t.offsetTop+t.offsetHeight-2*e.offsetTop-e.offsetHeight)<t.offsetHeight+e.offsetHeight},i.prototype.drawWord=function(t,e){var o,i=this,r=this.randomizeAngle?6.28*Math.random():0,n=0,s=5;this.dataArr[0].weight>this.dataArr[this.dataArr.length-1].weight&&(this.strict?10<e.weight?(s=10,console.warn("[TagCloud strict] Weight property "+e.weight+" > 10. Fallback to 10 as you are using strict mode",e)):e.weight<1?(s=1,console.warn("[TagCloud strict] Given weight property "+e.weight+" < 1. Fallback to 1 as you are using strict mode",e)):e.weight%1!=0?(s=Math.round(e.weight),console.warn("[TagCloud strict] Given weight property "+e.weight+" is not an integer. Rounded value to "+s,e)):s=e.weight:s=Math.round((e.weight-this.dataArr[this.dataArr.length-1].weight)/(this.dataArr[0].weight-this.dataArr[this.dataArr.length-1].weight)*9)+1),(o=this.r2.createElement("span")).className="w"+s;var a=this.clicked;o.onclick=function(){a.emit(e)};var l=this.r2.createText(e.text);e.color&&this.r2.setStyle(o,"color",e.color);var h="";if(e.rotate&&(h="rotate("+e.rotate+"deg)",this.r2.setStyle(o,"transform",h)),e.link){var p=this.r2.createElement("a");p.href=e.link,e.external!==undefined&&e.external&&(p.target="_blank"),p.appendChild(l),l=p}this.zoomOnHover&&1!==this.zoomOnHover.scale&&(this.zoomOnHover.transitionTime||(this.zoomOnHover.transitionTime=0),this.zoomOnHover.scale||(this.zoomOnHover.scale=1),o.onmouseover=function(){i.r2.setStyle(o,"transition","transform "+i.zoomOnHover.transitionTime+"s"),i.r2.setStyle(o,"transform","scale("+i.zoomOnHover.scale+") "+h),i.r2.setStyle(o,"transition-delay",i.zoomOnHover.delay+"s"),i.zoomOnHover.color&&(e.link?i.r2.setStyle(l,"color",i.zoomOnHover.color):i.r2.setStyle(o,"color",i.zoomOnHover.color))},o.onmouseout=function(){i.r2.setStyle(o,"transform","none "+h),e.link?i.r2.removeStyle(l,"color"):i.r2.removeStyle(o,"color")}),o.appendChild(l),this.r2.appendChild(this.el.nativeElement,o);var d=o.offsetWidth,c=o.offsetHeight,f=this.options.center.x,u=this.options.center.y,g=o.style;if(g.position="absolute",g.left=f+"px",g.top=u+"px",e.tooltip){this.r2.addClass(o,"tooltip");var y=this.r2.createElement("span");y.className="tooltiptext";var m=this.r2.createText(e.tooltip);y.appendChild(m),o.appendChild(y)}for(;this.hitTest(o,this.alreadyPlacedWords);)n+=this.options.step,r+=(t%2==0?1:-1)*this.options.step,f=this.options.center.x-d/2+n*Math.cos(r)*this.options.aspectRatio,u=this.options.center.y+n*Math.sin(r)-c/2,g.left=f+"px",g.top=u+"px";this.options.overflow||!(f<0||u<0||f+d>this.options.width||u+c>this.options.height)?this.alreadyPlacedWords.push(o):o.remove()},i.decorators=[{type:o.Component,args:[{selector:"angular-tag-cloud, ng-tag-cloud, ngtc",template:"",styles:[':host{font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:normal;color:#09f;overflow:hidden;position:relative;display:block}span{padding:0}span.w10{font-size:550%}span.w9{font-size:500%}span.w8{font-size:450%}span.w7{font-size:400%}span.w6{font-size:350%}span.w5{font-size:300%}span.w4{font-size:250%}span.w3{font-size:200%}span.w2{font-size:150%}a:hover,span.w10,span.w8,span.w9{color:#0cf}span.w7{color:#39d}span.w6{color:#90c5f0}span.w5{color:#90a0dd}span.w4{color:#90c5f0}span.w3{color:#a0ddff}span.w2{color:#9ce}span.w1{font-size:100%;color:#aab5f0}.tooltip .tooltiptext{visibility:hidden;width:inherit;background-color:#555;color:#fff;text-align:center;border-radius:6px;padding:5px 10px;position:absolute;bottom:100%;left:0;opacity:0;transition:opacity .3s}.tooltip .tooltiptext::after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:#555 transparent transparent}.tooltip:hover .tooltiptext{visibility:visible;opacity:1}']}]}],i.ctorParameters=function(){return[{type:o.ElementRef},{type:o.Renderer2}]},i.propDecorators={data:[{type:o.Input}],width:[{type:o.Input}],height:[{type:o.Input}],overflow:[{type:o.Input}],strict:[{type:o.Input}],zoomOnHover:[{type:o.Input}],realignOnResize:[{type:o.Input}],randomizeAngle:[{type:o.Input}],clicked:[{type:o.Output}],dataChanges:[{type:o.Output}],afterInit:[{type:o.Output}],afterChecked:[{type:o.Output}],onResize:[{type:o.HostListener,args:["window:resize",["$event"]]}]},i);function i(t,e){this.el=t,this.r2=e,this.width=500,this.height=300,this.overflow=!0,this.strict=!1,this.zoomOnHover={transitionTime:0,scale:1,delay:0,color:null},this.realignOnResize=!1,this.randomizeAngle=!1,this.clicked=new o.EventEmitter,this.dataChanges=new o.EventEmitter,this.afterInit=new o.EventEmitter,this.afterChecked=new o.EventEmitter,this.alreadyPlacedWords=[]}var r=(n.decorators=[{type:o.NgModule,args:[{declarations:[e],exports:[e],entryComponents:[e]}]}],n);function n(){}t.TagCloudModule=r,t.TagCloudComponent=e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-tag-cloud-module.umd.min.js.map